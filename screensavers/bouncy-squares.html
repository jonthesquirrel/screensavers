<!DOCTYPE html>
<!-- Copyright (c) 2014 Jonathan Herman - MIT License -->
<!-- https://github.com/jdh11235/screensavers -->

<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

	<title>Bouncy Squares - screensaver</title>

	<style>

		body {
			background: black;
			height: 100%;
			margin: 0;
			padding: 0;
			position: fixed;
			width: 100%;
		}

		.nav {
			box-shadow: inset 0 0 0 0.5em darkgray;
			color: darkgray;
			padding: 1em;
			position: fixed;
			right: 0;
			top: 0;
			z-index: 2;
		}

	</style>
</head>
<body>
	<a href="http://git.io/screensavers" class="nav">git.io/screensavers</a>

	<script>
		'use strict';

		//prevent touch scrolling
		document.ontouchmove = function (event) { event.preventDefault(); };

		/* begin animation */
		function SquareElement (color, positionX, positionY) {
			var element = document.createElement('div');

//			element.style.boxShadow = '';

			return element;
		}

		function randomInRange (min, max) {
			return Math.round(Math.random() * (max - min) + min);
		}

		function randomColor () {
			return '#' + randomInRange(0, 0xffffff).toString(16);
		}

		var queue = 1;
		var elements = [];

		function animate (time) {
			if (queue > 0) {
				//add new element with randomized attributes: speed, color, positionX, positionY, directionX, DirectionY


				queue--;
			}

			//animate all elements

			requestAnimationFrame(animate);
		}

//		requestAnimationFrame(animate);
		/* end animation */

		/* begin fasterclick */
		var element = document.body;

		var anticlick = 0;

		function spawn () {
			queue++;
			alert(' queue: ' + queue + '\n anticlick: ' + anticlick); //debug
		}

		function handle_touchstart (event) {
			spawn();

			anticlick++;
		}

		function handle_click (event) {
			if (anticlick > 0) {
				anticlick--;
			} else {
				spawn();
			}
		}

		element.addEventListener('touchstart', handle_touchstart);
		element.addEventListener('click', handle_click);
		/* end fasterclick */
	</script>
</body>
</html>
